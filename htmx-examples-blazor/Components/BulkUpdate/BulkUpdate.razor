@page "/BulkUpdate"
@using htmx_examples_blazor.Pages.BulkUpdate
@inject IContactService ContactService;

<PageTitle>Bulk Update</PageTitle>

<div hx-include="#checked-contacts" hx-target="#tbody">
    <button class="btn btn-primary btn-icon-split" hx-put="/BulkUpdate/Activate">Activate</button>
    <button class="btn btn-primary btn-icon-split" hx-put="/BulkUpdate/Deactivate">Deactivate</button>
</div>

@if (_contactTableRows != null && _contactTableRows?.Count() > 0)
{
    <form id="checked-contacts">
        <AntiforgeryToken />
        <table>
            <thead>
            <tr>
                <th></th>
                <th>Name</th>
                <th>Email</th>
                <th>Status</th>
            </tr>
            </thead>

            <tbody id="tbody">
            <TableBody Model="_contactTableRows" />
            </tbody>
        </table>
    </form>
}

@code {
    private List<Contact>? _contactTableRows = [];

    protected override void OnInitialized()
    {
        _contactTableRows = ContactService.Get().ToList();
    }
}